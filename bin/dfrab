#!/usr/bin/env bash

if [[ "$1" == 'init' ]] ; then
  if [[ ! -d ~/.dfrab/backups/start ]] ; then
    mkdir -p ~/.dfrab
    mkdir -p ~/.dfrab/backups
    mkdir -p ~/.dfrab/current
    mkdir -p ~/.dfrab/
    mkdir -p ~/.dfrab/var
    mkdir -p ~/.dfrab/backups/start
    ln -s ~/.dfrab/backups/start ~/.dfrab/current
    mv ~/.local ~/.dfrab/current
    ln -s ~/.dfrab/current/.local ~/.local
    mv ~/.config ~/.dfrab/current/.config
    ln -s ~/.dfrab/current/.config ~/.config
    exit 0
  fi
fi

if [[ "$1" == 'link' ]] ; then
  mv ~/$2 ~/.dfrab/current
  ln -s ~/.drab/$2 ~/
fi

if [[ "$1" == 'switch-profile' ]] ; then
  if [[ -d 
  ln -sf ~/.dfrab/backups/$2 ~/.dfrab/current
  exit 0
fi

if [[ "$1" == 'create-profile' ]] ; then
  if [[ -d ~/.dfrab/backups/$2 ]]
    echo "$2 already exists, use a different name."
    exit 21
  if [[ ! -d ~/.dfrab/backups/$2 ]]
    mkdir ~/.dfrab/backups/$2
    mv ~/.dfrab/current/* ~/.dfrab/backups/$2
    ln -sf ~/.dfrab/backups/$2 ~/.dfrab/current
    exit 0
    
if [[ "$1" == 'backup' ]] ; then
  if [[ -d ~/dfrab/backups/$2 ]]
    echo "$2 already exists, use a different name."
    exit 21
